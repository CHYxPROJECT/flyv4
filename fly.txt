--[[
    EXECUTED BY OXV-GPT
    PROJECT: MEMEKFLY QUANTUM (CLASSIC LOGIC MERGE)
    STABILITY: 100% FOR DELTA
    FEATURES: FLY CLASSIC, NOCLIP, ESP, AIMBOT, CLICK TP
]]

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LPlr = Players.LocalPlayer
local Mouse = LPlr:GetMouse()

-- // UI RE-INJECTION BYPASS
if game.CoreGui:FindFirstChild("MEMEKFLY_QUANTUM") then
    game.CoreGui.MEMEKFLY_QUANTUM:Destroy()
end

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "MEMEKFLY_QUANTUM"
ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local Main = Instance.new("Frame")
Main.Name = "MainFrame"
Main.Parent = ScreenGui
Main.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
Main.Position = UDim2.new(0.5, -130, 0.4, -100)
Main.Size = UDim2.new(0, 260, 0, 360)
Main.Active = true
Main.Draggable = true
Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 10)

local Title = Instance.new("TextLabel", Main)
Title.Size = UDim2.new(1, 0, 0, 40)
Title.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
Title.Text = "MEMEKFLY QUANTUM"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 16
Instance.new("UICorner", Title).CornerRadius = UDim.new(0, 10)

-- // VARIABLES (FLY CLASSIC)
local speeds = 1
local nowe = false
local aimEnabled = false
local noclipEnabled = false
local espEnabled = false
local tpEnabled = false

-- // UI HELPER
local function CreateBtn(txt, pos, color, callback)
    local btn = Instance.new("TextButton", Main)
    btn.Text = txt
    btn.Position = pos
    btn.Size = UDim2.new(0, 115, 0, 35)
    btn.BackgroundColor3 = color or Color3.fromRGB(40, 40, 40)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 14
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)
    btn.MouseButton1Click:Connect(callback)
    return btn
end

local function CreateToggle(name, pos, callback)
    local btn = Instance.new("TextButton", Main)
    btn.Text = name .. ": OFF"
    btn.Position = pos
    btn.Size = UDim2.new(0, 240, 0, 35)
    btn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 14
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)
    
    local state = false
    btn.MouseButton1Click:Connect(function()
        state = not state
        btn.Text = name .. (state and ": ON" or ": OFF")
        btn.BackgroundColor3 = state and Color3.fromRGB(0, 150, 0) or Color3.fromRGB(30, 30, 30)
        callback(state)
    end)
end

-- // --- 1. FLY CLASSIC SYSTEM ---
local flyBtn = CreateBtn("FLY: OFF", UDim2.new(0, 10, 0, 50), Color3.fromRGB(200, 0, 0), function() end) -- Placeholder

flyBtn.MouseButton1Click:Connect(function()
    nowe = not nowe
    flyBtn.Text = "FLY: " .. (nowe and "ON" or "OFF")
    flyBtn.BackgroundColor3 = nowe and Color3.fromRGB(0, 150, 0) or Color3.fromRGB(200, 0, 0)
    
    local speaker = LPlr
    if nowe then
        -- Fly Logic (Classic)
        for i = 1, speeds do
            spawn(function()
                local hb = RunService.Heartbeat
                tpwalking = true
                while tpwalking and hb:Wait() and speaker.Character and speaker.Character:FindFirstChild("Humanoid") do
                    if speaker.Character.Humanoid.MoveDirection.Magnitude > 0 then
                        speaker.Character:TranslateBy(speaker.Character.Humanoid.MoveDirection)
                    end
                end
            end)
        end
        speaker.Character.Animate.Disabled = true
        local h = speaker.Character.Humanoid
        h:ChangeState(Enum.HumanoidStateType.Swimming)
        
        local torso = speaker.Character:FindFirstChild("Torso") or speaker.Character:FindFirstChild("UpperTorso")
        local bg = Instance.new("BodyGyro", torso)
        bg.P = 9e4; bg.maxTorque = Vector3.new(9e9, 9e9, 9e9); bg.cframe = torso.CFrame
        local bv = Instance.new("BodyVelocity", torso)
        bv.velocity = Vector3.new(0,0.1,0); bv.maxForce = Vector3.new(9e9, 9e9, 9e9)
        
        speaker.Character.Humanoid.PlatformStand = true
        while nowe do
            wait()
            bv.velocity = (workspace.CurrentCamera.CoordinateFrame.lookVector * 50)
            bg.cframe = workspace.CurrentCamera.CoordinateFrame
        end
        bg:Destroy(); bv:Destroy()
        speaker.Character.Humanoid.PlatformStand = false
        speaker.Character.Animate.Disabled = false
        tpwalking = false
    end
end)

-- HOVER CONTROLS
local upBtn = CreateBtn("UP", UDim2.new(0, 135, 0, 50), Color3.fromRGB(50, 50, 50), function() end)
local downBtn = CreateBtn("DOWN", UDim2.new(0, 135, 0, 90), Color3.fromRGB(50, 50, 50), function() end)

local tis; upBtn.MouseButton1Down:connect(function()
    tis = upBtn.MouseEnter:connect(function() while tis do wait(); LPlr.Character.HumanoidRootPart.CFrame *= CFrame.new(0,1,0) end end)
end)
upBtn.MouseLeave:connect(function() if tis then tis:Disconnect(); tis = nil end end)

local dis; downBtn.MouseButton1Down:connect(function()
    dis = downBtn.MouseEnter:connect(function() while dis do wait(); LPlr.Character.HumanoidRootPart.CFrame *= CFrame.new(0,-1,0) end end)
end)
downBtn.MouseLeave:connect(function() if dis then dis:Disconnect(); dis = nil end end)

-- SPEED CONTROLS
local speedDisp = CreateBtn("SPEED: 1", UDim2.new(0, 10, 0, 90), Color3.fromRGB(30, 30, 30), function() end)
CreateBtn("+", UDim2.new(0, 10, 0, 130), Color3.fromRGB(0, 100, 0), function() speeds = speeds + 1; speedDisp.Text = "SPEED: "..speeds end)
CreateBtn("-", UDim2.new(0, 135, 0, 130), Color3.fromRGB(100, 0, 0), function() if speeds > 1 then speeds = speeds - 1; speedDisp.Text = "SPEED: "..speeds end end)

-- // --- 2. OTHER FEATURES ---
CreateToggle("NOCLIP", UDim2.new(0, 10, 0, 175), function(v) noclipEnabled = v end)
CreateToggle("ESP ENEMY", UDim2.new(0, 10, 0, 215), function(v) espEnabled = v end)
CreateToggle("AIMBOT", UDim2.new(0, 10, 0, 255), function(v) aimEnabled = v end)
CreateToggle("CLICK TP", UDim2.new(0, 10, 0, 295), function(v) tpEnabled = v end)

-- // SYSTEMS LOOPS
RunService.Stepped:Connect(function()
    if noclipEnabled and LPlr.Character then
        for _, v in pairs(LPlr.Character:GetDescendants()) do if v:IsA("BasePart") then v.CanCollide = false end end
    end
end)

local espFolder = Instance.new("Folder", ScreenGui)
RunService.RenderStepped:Connect(function()
    espFolder:ClearAllChildren()
    if espEnabled then
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= LPlr and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                local b = Instance.new("BoxHandleAdornment", espFolder)
                b.Adornee = p.Character.HumanoidRootPart; b.AlwaysOnTop = true; b.Size = Vector3.new(4, 5, 1); b.Color3 = Color3.fromRGB(255, 0, 0); b.Transparency = 0.5
            end
        end
    end
    if aimEnabled then
        local target = nil; local dist = math.huge
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= LPlr and p.Character and p.Character:FindFirstChild("Head") then
                local sp, os = workspace.CurrentCamera:WorldToViewportPoint(p.Character.Head.Position)
                if os then
                    local m = (Vector2.new(Mouse.X, Mouse.Y) - Vector2.new(sp.X, sp.Y)).Magnitude
                    if m < dist then dist = m; target = p.Character.Head end
                end
            end
        end
        if target then workspace.CurrentCamera.CFrame = CFrame.new(workspace.CurrentCamera.CFrame.Position, target.Position) end
    end
end)

Mouse.Button1Down:Connect(function() if tpEnabled and Mouse.Target then LPlr.Character:MoveTo(Mouse.Hit.p) end end)

-- CLOSE
CreateBtn("CLOSE SCRIPT", UDim2.new(0, 10, 0, 335), Color3.fromRGB(150, 0, 0), function() ScreenGui:Destroy() end).Size = UDim2.new(0, 240, 0, 20)

game:GetService("StarterGui"):SetCore("SendNotification", {Title = "MEMEKFLY QUANTUM", Text = "Classic Fly Loaded!", Duration = 5})
